<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OCamlR (ocaml-r.OCamlR)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocaml-r</a> &#x00BB; OCamlR</nav><h1>Module <code>OCamlR</code></h1><p>Bindings for the R interpreter.</p><p>It encapsulates the functionalities of the <code>libR.so</code> shared library provided by the R software. This enables us to <b>embed the R interpreter</b> into Objective Caml, to execute R code from Objective Caml and to exchange data structures between R and Objective Caml. A lot of information on R internals can be found in the official <a href="https://cran.r-project.org/doc/manuals/r-release/R-ints.html">documentation</a> as well as in this <a href="https://github.com/hadley/r-internals">document</a>.</p><h5 id="thread-safety"><a href="#thread-safety" class="anchor"></a>THREAD SAFETY</h5><p>It is important to understand that this binding is a rather low-level binding of R functionality. As such, it is no more thread-safe than R itself, which is not thread-safe at all. Therefore, avoid real threading unless you know what you're doing...</p><h5 id="data-conversion"><a href="#data-conversion" class="anchor"></a>DATA CONVERSION</h5><p>R is an array-oriented language. Therefore, simple values such as a boolean, a string, a number, are in fact encapsulated, in R, in an array of booleans, an array of strings, an array of numbers. For a simple value, the array has only one element.</p><p>Moreover, as R is scientific software, it is important that data types be correctly matched between Objective Caml and R. At the moment, they are not. I am thinking here of the 31/32 bit issues, or 63/64 bit issue, or, for instance.</p><nav class="toc"><ul><li><a href="#internal-representation-of-r-values.">Internal representation of R values.</a><ul><li><a href="#low-level-sexp-typing.">Low-level SEXP typing.</a></li><li><a href="#vector-types">Vector types</a></li></ul></li><li><a href="#value-inspection">Value inspection</a></li><li><a href="#parsing-r-code.">Parsing R code.</a></li><li><a href="#evaluation-of-r-code-and-calls.">Evaluation of R code and calls.</a></li><li><a href="#initialisation">Initialisation</a></li></ul></nav></header><section><header><h3 id="internal-representation-of-r-values."><a href="#internal-representation-of-r-values." class="anchor"></a>Internal representation of R values.</h3></header><dl><dt class="spec type" id="type-sexp"><a href="#type-sexp" class="anchor"></a><code><span class="keyword">type</span> sexp</code></dt></dl><section><header><h4 id="low-level-sexp-typing."><a href="#low-level-sexp-typing." class="anchor"></a>Low-level SEXP typing.</h4></header><dl><dt class="spec type" id="type-sxp"><a href="#type-sxp" class="anchor"></a><code><span class="keyword">type</span> <span>'a sxp</span></code><code> = <span class="keyword">private</span> <a href="index.html#type-sexp">sexp</a></code></dt><dt class="spec type" id="type-nilsxp"><a href="#type-nilsxp" class="anchor"></a><code><span class="keyword">type</span> nilsxp</code><code> = <span><span>[ `Nil ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-symsxp"><a href="#type-symsxp" class="anchor"></a><code><span class="keyword">type</span> symsxp</code><code> = <span><span>[ `Sym ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-langsxp"><a href="#type-langsxp" class="anchor"></a><code><span class="keyword">type</span> langsxp</code><code> = <span><span>[ `Lang ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-listsxp"><a href="#type-listsxp" class="anchor"></a><code><span class="keyword">type</span> listsxp</code><code> = <span><span>[ `List ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-dotsxp"><a href="#type-dotsxp" class="anchor"></a><code><span class="keyword">type</span> dotsxp</code><code> = <span><span>[ `Dot ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-closxp"><a href="#type-closxp" class="anchor"></a><code><span class="keyword">type</span> closxp</code><code> = <span><span>[ `Clo ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-envsxp"><a href="#type-envsxp" class="anchor"></a><code><span class="keyword">type</span> envsxp</code><code> = <span><span>[ `Env ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-promsxp"><a href="#type-promsxp" class="anchor"></a><code><span class="keyword">type</span> promsxp</code><code> = <span><span>[ `Prom ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-specialsxp"><a href="#type-specialsxp" class="anchor"></a><code><span class="keyword">type</span> specialsxp</code><code> = <span><span>[ `Special ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-builtinsxp"><a href="#type-builtinsxp" class="anchor"></a><code><span class="keyword">type</span> builtinsxp</code><code> = <span><span>[ `Builtin ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-vecsxp"><a href="#type-vecsxp" class="anchor"></a><code><span class="keyword">type</span> vecsxp</code><code> = <span><span>[ `Vec ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-charsxp"><a href="#type-charsxp" class="anchor"></a><code><span class="keyword">type</span> charsxp</code><code> = <span><span>[ `Char ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-lglsxp"><a href="#type-lglsxp" class="anchor"></a><code><span class="keyword">type</span> lglsxp</code><code> = <span><span>[ `Lgl ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-intsxp"><a href="#type-intsxp" class="anchor"></a><code><span class="keyword">type</span> intsxp</code><code> = <span><span>[ `Int ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-realsxp"><a href="#type-realsxp" class="anchor"></a><code><span class="keyword">type</span> realsxp</code><code> = <span><span>[ `Real ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-strsxp"><a href="#type-strsxp" class="anchor"></a><code><span class="keyword">type</span> strsxp</code><code> = <span><span>[ `Str ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-rawsxp"><a href="#type-rawsxp" class="anchor"></a><code><span class="keyword">type</span> rawsxp</code><code> = <span><span>[ `Raw ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-exprsxp"><a href="#type-exprsxp" class="anchor"></a><code><span class="keyword">type</span> exprsxp</code><code> = <span><span>[ `Expr ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt><dt class="spec type" id="type-nonempty_list"><a href="#type-nonempty_list" class="anchor"></a><code><span class="keyword">type</span> <span>'a nonempty_list</span></code><code> = <span>[&lt; `List <span>| `Lang</span> <span>| `Dots</span> ]</span> <span class="keyword">as</span> 'a</code></dt><dd><p>R-ints: Language objects (LANGSXP) are calls (including formulae and so on). Internally they are pairlists with first element a reference to the function to be called with remaining elements the actual arguments for the call. Although this is not enforced, many places in the code assume that the pairlist is of length one or more, often without checking.</p></dd></dl><dl><dt class="spec type" id="type-internallist"><a href="#type-internallist" class="anchor"></a><code><span class="keyword">type</span> internallist</code> = <code>[ </code><table class="variant"><tr id="type-internallist.Nil" class="anchored"><td class="def constructor"><a href="#type-internallist.Nil" class="anchor"></a><code>| </code><code>`Nil</code></td></tr><tr id="type-internallist.List" class="anchored"><td class="def constructor"><a href="#type-internallist.List" class="anchor"></a><code>| </code><code>`List</code></td></tr><tr id="type-internallist.Lang" class="anchored"><td class="def constructor"><a href="#type-internallist.Lang" class="anchor"></a><code>| </code><code>`Lang</code></td></tr><tr id="type-internallist.Dots" class="anchored"><td class="def constructor"><a href="#type-internallist.Dots" class="anchor"></a><code>| </code><code>`Dots</code></td></tr></table><code> ]</code></dt><dd><p>Type of low-level internal list. In R, such * internal lists may be empty, a pairlist or * a call which is somewhat similar to closure * ready for execution.</p></dd></dl><dl><dt class="spec type" id="type-pairlist"><a href="#type-pairlist" class="anchor"></a><code><span class="keyword">type</span> <span>'a pairlist</span></code><code> = <span>[&lt; `Nil <span>| `List</span> ]</span> <span class="keyword">as</span> 'a</code></dt><dt class="spec type" id="type-vector"><a href="#type-vector" class="anchor"></a><code><span class="keyword">type</span> vector</code> = <code>[ </code><table class="variant"><tr id="type-vector.Char" class="anchored"><td class="def constructor"><a href="#type-vector.Char" class="anchor"></a><code>| </code><code>`Char</code></td></tr><tr id="type-vector.Lgl" class="anchored"><td class="def constructor"><a href="#type-vector.Lgl" class="anchor"></a><code>| </code><code>`Lgl</code></td></tr><tr id="type-vector.Int" class="anchored"><td class="def constructor"><a href="#type-vector.Int" class="anchor"></a><code>| </code><code>`Int</code></td></tr><tr id="type-vector.Real" class="anchored"><td class="def constructor"><a href="#type-vector.Real" class="anchor"></a><code>| </code><code>`Real</code></td></tr><tr id="type-vector.Str" class="anchored"><td class="def constructor"><a href="#type-vector.Str" class="anchor"></a><code>| </code><code>`Str</code></td></tr><tr id="type-vector.Raw" class="anchored"><td class="def constructor"><a href="#type-vector.Raw" class="anchor"></a><code>| </code><code>`Raw</code></td></tr><tr id="type-vector.Expr" class="anchored"><td class="def constructor"><a href="#type-vector.Expr" class="anchor"></a><code>| </code><code>`Expr</code></td></tr><tr id="type-vector.Vec" class="anchored"><td class="def constructor"><a href="#type-vector.Vec" class="anchor"></a><code>| </code><code>`Vec</code></td></tr></table><code> ]</code></dt></dl><div class="spec module-type" id="module-type-SXP"><a href="#module-type-SXP" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-SXP/index.html">SXP</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Sexp"><a href="#module-Sexp" class="anchor"></a><code><span class="keyword">module</span> <a href="Sexp/index.html">Sexp</a> : <a href="index.html#module-type-SXP">SXP</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-SXP/index.html#type-t">t</a> = <a href="index.html#type-sexp">sexp</a></code></div><div class="spec module" id="module-Nilsxp"><a href="#module-Nilsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Nilsxp/index.html">Nilsxp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Dotsxp"><a href="#module-Dotsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Dotsxp/index.html">Dotsxp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Envsxp"><a href="#module-Envsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Envsxp/index.html">Envsxp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Langsxp"><a href="#module-Langsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Langsxp/index.html">Langsxp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Symsxp"><a href="#module-Symsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Symsxp/index.html">Symsxp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h4 id="vector-types"><a href="#vector-types" class="anchor"></a>Vector types</h4><p>R is an array-oriented language. Therefore, simple values such as a boolean, a string, a number, are in fact encapsulated, in R, in an array of booleans, an array of strings, an array of numbers. For a simple value, the array has only one element.</p></header><div class="spec module-type" id="module-type-Vector"><a href="#module-type-Vector" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Vector/index.html">Vector</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Atomic_vector"><a href="#module-type-Atomic_vector" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html">Atomic_vector</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Intsxp"><a href="#module-Intsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Intsxp/index.html">Intsxp</a> : <a href="index.html#module-type-Atomic_vector">Atomic_vector</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-t">t</a> = <a href="index.html#type-intsxp">intsxp</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-repr">repr</a> = int</code></dt><dd><p>R array of integer values</p></dd></dl><dl><dt class="spec module" id="module-Lglsxp"><a href="#module-Lglsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Lglsxp/index.html">Lglsxp</a> : <a href="index.html#module-type-Atomic_vector">Atomic_vector</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-t">t</a> = <a href="index.html#type-lglsxp">lglsxp</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-repr">repr</a> = bool</code></dt><dd><p>R array of boolean values</p></dd></dl><dl><dt class="spec module" id="module-Realsxp"><a href="#module-Realsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Realsxp/index.html">Realsxp</a> : <a href="index.html#module-type-Atomic_vector">Atomic_vector</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-t">t</a> = <a href="index.html#type-realsxp">realsxp</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-repr">repr</a> = float</code></dt><dd><p>R array of float values</p></dd></dl><dl><dt class="spec module" id="module-Strsxp"><a href="#module-Strsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Strsxp/index.html">Strsxp</a> : <a href="index.html#module-type-Atomic_vector">Atomic_vector</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-t">t</a> = <a href="index.html#type-strsxp">strsxp</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-Atomic_vector/index.html#type-repr">repr</a> = string</code></dt><dd><p>R array of string values</p></dd></dl><dl><dt class="spec module" id="module-Vecsxp"><a href="#module-Vecsxp" class="anchor"></a><code><span class="keyword">module</span> <a href="Vecsxp/index.html">Vecsxp</a> : <a href="index.html#module-type-Vector">Vector</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Vector/index.html#type-t">t</a> = <a href="index.html#type-vecsxp">vecsxp</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-Vector/index.html#type-repr">repr</a> = <a href="Sexp/index.html#type-t">Sexp.t</a></code></dt><dd><p>R list</p></dd></dl></section></section><section><header><h3 id="value-inspection"><a href="#value-inspection" class="anchor"></a>Value inspection</h3></header><dl><dt class="spec module" id="module-Sexptype"><a href="#module-Sexptype" class="anchor"></a><code><span class="keyword">module</span> <a href="Sexptype/index.html">Sexptype</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Algebraic datatype reflecting R's dynamic typing.</p></dd></dl><dl><dt class="spec module" id="module-Pretty"><a href="#module-Pretty" class="anchor"></a><code><span class="keyword">module</span> <a href="Pretty/index.html">Pretty</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Provides facilities to inspect internal structure of SEXPs. Useful in the toplevel when you encounter unexpected R values.</p></dd></dl></section><section><header><h3 id="parsing-r-code."><a href="#parsing-r-code." class="anchor"></a>Parsing R code.</h3></header><dl><dt class="spec type" id="type-parse_status"><a href="#type-parse_status" class="anchor"></a><code><span class="keyword">type</span> parse_status</code><code> = </code><table class="variant"><tr id="type-parse_status.Parse_Null" class="anchored"><td class="def constructor"><a href="#type-parse_status.Parse_Null" class="anchor"></a><code>| </code><code><span class="constructor">Parse_Null</span></code></td></tr><tr id="type-parse_status.Parse_OK" class="anchored"><td class="def constructor"><a href="#type-parse_status.Parse_OK" class="anchor"></a><code>| </code><code><span class="constructor">Parse_OK</span></code></td></tr><tr id="type-parse_status.Parse_Incomplete" class="anchored"><td class="def constructor"><a href="#type-parse_status.Parse_Incomplete" class="anchor"></a><code>| </code><code><span class="constructor">Parse_Incomplete</span></code></td></tr><tr id="type-parse_status.Parse_Error" class="anchored"><td class="def constructor"><a href="#type-parse_status.Parse_Error" class="anchor"></a><code>| </code><code><span class="constructor">Parse_Error</span></code></td></tr><tr id="type-parse_status.Parse_EOF" class="anchored"><td class="def constructor"><a href="#type-parse_status.Parse_EOF" class="anchor"></a><code>| </code><code><span class="constructor">Parse_EOF</span></code></td><td class="doc"><p>Outcome of a parsing request.</p></td></tr></table></dt></dl><dl><dt class="spec exception" id="exception-Parsing_failure"><a href="#exception-Parsing_failure" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Parsing_failure</span> <span class="keyword">of</span> <a href="index.html#type-parse_status">parse_status</a> * string</code></dt><dd><p>Exception raised when parsing fails.</p></dd></dl><dl><dt class="spec value" id="val-parse_string"><a href="#val-parse_string" class="anchor"></a><code><span class="keyword">val</span> parse_string : <span>?&#8288;max:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-langsxp">langsxp</a> list</span></code></dt><dd><p>Parse a string of R code into R calls.</p><dl><dt>parameter max</dt><dd><p>If omitted, parse the whole R code, even if there are multiple statements. Otherwise, maximum number of statements to parse.</p></dd></dl><dl><dt>raises Parsing_failure</dt><dd><p>When parsing fails.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-parse"><a href="#val-parse" class="anchor"></a><code><span class="keyword">val</span> parse : string <span>&#45;&gt;</span> <a href="index.html#type-langsxp">langsxp</a></code></dt><dd><p>Parse the first R statement in the given R code.</p></dd></dl></section><section><header><h3 id="evaluation-of-r-code-and-calls."><a href="#evaluation-of-r-code-and-calls." class="anchor"></a>Evaluation of R code and calls.</h3></header><dl><dt class="spec exception" id="exception-Runtime_error"><a href="#exception-Runtime_error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Runtime_error</span> <span class="keyword">of</span> <a href="index.html#type-langsxp">langsxp</a> * string</code></dt></dl><div class="spec module-type" id="module-type-Conversion"><a href="#module-type-Conversion" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Conversion/index.html">Conversion</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Enc"><a href="#module-Enc" class="anchor"></a><code><span class="keyword">module</span> <a href="Enc/index.html">Enc</a> : <a href="index.html#module-type-Conversion">Conversion</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="module-type-Conversion/index.html#type-t">t</a></span> = <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="Sexp/index.html#type-t">Sexp.t</a></code></div><div class="spec module" id="module-Dec"><a href="#module-Dec" class="anchor"></a><code><span class="keyword">module</span> <a href="Dec/index.html">Dec</a> : <a href="index.html#module-type-Conversion">Conversion</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="module-type-Conversion/index.html#type-t">t</a></span> = <a href="Sexp/index.html#type-t">Sexp.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></div><dl><dt class="spec value" id="val-symbol"><a href="#val-symbol" class="anchor"></a><code><span class="keyword">val</span> symbol : <span>?&#8288;generic:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="Sexp/index.html#type-t">Sexp.t</a></code></dt><dd><p>Retrieves an R symbol from the symbol table, given its name.</p></dd></dl><dl><dt class="spec value" id="val-eval_string"><a href="#val-eval_string" class="anchor"></a><code><span class="keyword">val</span> eval_string : string <span>&#45;&gt;</span> <a href="Sexp/index.html#type-t">Sexp.t</a></code></dt><dd><p><code>string</code> takes a string containing R code, and feeds it to the R interpreter. You get the resulting value back. The typing of this function is deliberately unsafe in order to allow the user to type it precisely.</p><p>Bug: currently, if you try to execute a statement that refers to symbols that haven't been loaded, you get a segfault. For instance, evaluating a string containing the <code>rbinom</code> symbol without the <code>R.stats</code> package being loaded raises a segfault.</p></dd></dl><dl><dt class="spec type" id="type-arg"><a href="#type-arg" class="anchor"></a><code><span class="keyword">type</span> arg</code></dt><dd><p>Convenience functions to wrap up arguments, when mapping R functions to Objective Caml functions.</p></dd></dl><dl><dt class="spec value" id="val-arg"><a href="#val-arg" class="anchor"></a><code><span class="keyword">val</span> arg : <span><span class="type-var">'a</span> <a href="Enc/index.html#type-t">Enc.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-arg">arg</a></code></dt><dt class="spec value" id="val-opt_arg"><a href="#val-opt_arg" class="anchor"></a><code><span class="keyword">val</span> opt_arg : <span><span class="type-var">'a</span> <a href="Enc/index.html#type-t">Enc.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <a href="index.html#type-arg">arg</a></code></dt><dt class="spec value" id="val-call"><a href="#val-call" class="anchor"></a><code><span class="keyword">val</span> call : <a href="Sexp/index.html#type-t">Sexp.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-arg">arg</a> list</span> <span>&#45;&gt;</span> <a href="Sexp/index.html#type-t">Sexp.t</a></code></dt><dd><p><code>call f args</code> evaluates an the R function <code>f</code> with respect to a list of arguments. Argument <code>None</code> is ignored, and <code>Some (name,
   sexp)</code> is the argument whose optional name is <code>name</code> and whose value is <code>sexp</code>. The typing of this function is deliberately unsafe in order to allow the user to type it precisely.</p></dd></dl></section><section><header><h3 id="initialisation"><a href="#initialisation" class="anchor"></a>Initialisation</h3><p>We provide two mechanisms to activate an R interpreter from OCaml-R:</p><p>The first mechanism consists of low-level bindings to the initialisation and termination functions of the <code>libR.so</code> shared library. While this is a rather flexible approach, it has the downside of not being a very static approach, specifically if your intention if to write Objective Caml bindings for a dependent bunch of R packages.</p><p>The second mechanism is a static, functorial approach: You just have to create a module with the <code>Interpreter</code> functor to initialise the R interpreter. You provide initialisation details through a module of module type <code>Environment</code>, and <code>Interpreter</code> will set it up correctly.</p><p>This functorial facility is available from the OCaml_R module: This OCaml_R module has the sole purpose of initialising the R interpreter with the <code>Standard</code> <code>Environment</code> module. No need to worry about initialisation details.</p><p>To create bindings for a dependent bunch of R packages, you simply have to make them depend on the findlib <code>R.interpreter</code> package, which involves the OCaml_R module. This is also convenient on the toplevel, where you simply have to have to invoke the <code>#require &quot;R.interpreter&quot;</code> directive to set up the interpreter.</p></header><dl><dt class="spec exception" id="exception-Initialisation_failed"><a href="#exception-Initialisation_failed" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Initialisation_failed</span></code></dt><dd><p>Denotes failure to initialise the R interpreter.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <span>?&#8288;argv:<span>string list</span></span> <span>&#45;&gt;</span> <span>?&#8288;env:<span><span>(string * string)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;packages:<span><span>string list</span> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;sigs:bool</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p><code>init</code> initialises the embedded R interpreter.</p><dl><dt>parameter name</dt><dd><p>Name of program. Defaults to Sys.argv.(0).</p></dd></dl><dl><dt>parameter argv</dt><dd><p>Command line options given to <code>libR.so</code>. Defaults to rest of Sys.argv.</p></dd></dl><dl><dt>parameter env</dt><dd><p>Environment variables to be set for R. Defaults to reasonable values.</p></dd></dl><dl><dt>parameter packages</dt><dd><p>Packages to be loaded at startup. If <code>None</code>, load the usual standard library.</p></dd></dl><dl><dt>parameter sigs</dt><dd><p>If <code>false</code>, stops R from setting his signal handlers. Defaults to <code>false</code>.</p></dd></dl><dl><dt>raises Initialisation_failed</dt><dd><p>In case R could not be started.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-terminate"><a href="#val-terminate" class="anchor"></a><code><span class="keyword">val</span> terminate : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Terminates the R session.</p></dd></dl><div class="spec module-type" id="module-type-Environment"><a href="#module-type-Environment" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Environment/index.html">Environment</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Standard_environment"><a href="#module-Standard_environment" class="anchor"></a><code><span class="keyword">module</span> <a href="Standard_environment/index.html">Standard_environment</a> : <a href="index.html#module-type-Environment">Environment</a></code></dt><dd><p>The <code>Standard</code> module contains initialisation details for libR.so. These informations are determined when the binding is being compiled.</p></dd></dl><dl><dt class="spec module" id="module-Interpreter_initialization"><a href="#module-Interpreter_initialization" class="anchor"></a><code><span class="keyword">module</span> <a href="Interpreter_initialization/index.html">Interpreter_initialization</a> : <span class="keyword">functor</span> (<a href="Interpreter_initialization/argument-1-Env/index.html">Env</a> : <a href="index.html#module-type-Environment">Environment</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Functor used to initialise statically an R interpreter, given initialisation details provided by the provided <code>Env</code> module.</p></dd></dl><dl><dt class="spec module" id="module-Low_level"><a href="#module-Low_level" class="anchor"></a><code><span class="keyword">module</span> <a href="Low_level/index.html">Low_level</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl><dl><dt class="spec value" id="val-attributes"><a href="#val-attributes" class="anchor"></a><code><span class="keyword">val</span> attributes : <a href="index.html#type-sexp">sexp</a> <span>&#45;&gt;</span> <span><span>(<a href="Symsxp/index.html#type-description">Symsxp.description</a> * <a href="index.html#type-sexp">sexp</a>)</span> list</span></code></dt><dt class="spec value" id="val-pairlist_of_list"><a href="#val-pairlist_of_list" class="anchor"></a><code><span class="keyword">val</span> pairlist_of_list : <span><span>(<a href="index.html#type-sexp">sexp</a> * <a href="index.html#type-sexp">sexp</a>)</span> list</span> <span>&#45;&gt;</span> <span><span>[&gt; <a href="index.html#type-internallist">internallist</a> ]</span> <a href="index.html#type-sxp">sxp</a></span></code></dt></dl></section></div></body></html>